<div class="container" *ngIf="assetList">
  <div class="row">
    <div class="col-9">
      <!-- <table class="table table-striped table-primary rounded overflow-hidden"> -->
      <table class="table table-bordered rounded rounded-3 overflow-hidden table-striped">
        <thead>
          <tr>
            <th class="col text-primary bg-light">Symbol</th>
            <th class="col text-primary bg-light">Units</th>
            <th class="col text-primary bg-light">Price</th>
            <th class="col text-primary bg-light">Total</th>
            <th class="col text-primary bg-light">24h Price Change</th>
            <th class="col text-primary bg-light">Modify</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let asset of assetList | slice: (page-1) * pageSize : page * pageSize">
            <!-- <td>{{ asset.assetId }}</td>
            <td>{{ asset.portfolioId }}</td> -->
            <td>{{ asset.symbol }}</td>
            <td>{{ asset.units }}</td>
            <td>{{ asset.livePrice | currency }}</td>
            <td>{{ asset.liveTotal | currency }}</td>
            <td [ngStyle]="{'color': asset.dailyChange > 0 ? 'green' : 'red' }">{{asset.dailyChange}}%</td>
            <!-- <td><button class="btn btn-primary"
                (click)="toggleUpdateAsset(asset.portfolioId, asset.assetId, asset.units, asset.symbol)">Modify</button>
            </td> -->
            <!-- <td>
              <span class="material-symbols-outlined">
                edit
              </span>
            </td> -->
            <td>
              <mat-icon fontSet="material-icons-outlined"
                (click)="toggleUpdateAsset(asset.portfolioId, asset.assetId, asset.units, asset.symbol)" #editIcon>
                edit</mat-icon>
            </td>
          </tr>
        </tbody>
        <ngb-pagination [(page)]="page" [pageSize]="pageSize" [collectionSize]="assetList.length"></ngb-pagination>
      </table>
      <div class="row mt-3 text-center" *ngIf="assetList">
        <h1 class="text-primary">Total: {{totalBalance | currency}} </h1>
      </div>
    </div>

    <div class="col">
      <div class="mb-5">
        <form [formGroup]="formGroup" (ngSubmit)="postAsset(this.portfolioId, symbol.value, +units.value)">
          <mat-form-field>
            <input formControlName="symbol" matInput type="text" [matAutocomplete]="auto" #symbol class="form-control"
              placeholder="Symbol">
            <mat-autocomplete #auto="matAutocomplete">
              <mat-option *ngFor="let symbol of filteredSymbols" [value]="symbol">
                {{symbol}}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>
          <input type="number" class="form-control" #units min="0" placeholder="Units">
          <button type="submit" class="btn btn-outline-primary mt-3">Add Asset</button>
        </form>
      </div>

      <div class="mt-3">
        <form *ngIf="toggleShowUpdateAsset" #submitForm="ngForm"
          (ngSubmit)="updateAsset(this.portfolioId, +assetId.value, symbol.value, +units.value)">
          <div class="mt-3">
            <label for="assetId" class="form-label" hidden>Asset Id</label>
            <input type="number" #assetId class="form-control" id="assetId" [ngModel]="updatedAsset.assetId"
              name="assetId" disabled hidden>
          </div>
          <div>
            <label for="portfolioId" class="form-label" hidden>Portfolio Id</label>
            <input type="number" #localportfolioId class="form-control" id="portfolioId"
              [ngModel]="updatedAsset.portfolioId" name="portfolioId" disabled hidden>
          </div>
          <div>
            <label for="symbol" class="form-label">Symbol</label>
            <input type="text" #symbol class="form-control" id="symbol" [ngModel]="updatedAsset.symbol" name="symbol"
              disabled>
          </div>
          <div>
            <label for="units" class="form-label">Units</label>
            <input type="number" #units class="form-control" id="units" [ngModel]="updatedAsset.units" name="units">
          </div>
          <button type="submit" class="btn btn-outline-success mt-3">Modify Asset</button>
          <button type="button" class="btn btn-outline-danger mt-3 float-end"
            (click)="deleteAsset(this.portfolioId, +assetId.value)">Delete Asset</button>
        </form>
      </div>
    </div>

  </div>
</div>

<!-- <button class="btn btn-primary" (click)="getCurrentUserId()">get claims</button> -->
<!-- <button class="btn btn-primary" (click)="getAllAssets(this.portfolioId)" *ngIf="!assetList">get assets</button> -->

<!-- <button class="btn btn-primary" (click)="getAssetListPricesUrl()">get assets url</button>
<button class="btn btn-primary" (click)="getAssetsPrice()">get assets json</button> -->