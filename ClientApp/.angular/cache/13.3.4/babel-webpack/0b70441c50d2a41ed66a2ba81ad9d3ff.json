{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\anton\\\\source\\\\repos\\\\PortfolioTracker\\\\ClientApp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/app-data.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/form-field\";\nimport * as i5 from \"@angular/material/input\";\nimport * as i6 from \"@angular/material/autocomplete\";\nimport * as i7 from \"@angular/material/core\";\n\nfunction AssetsComponent_div_0_tr_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\");\n    i0.ɵɵtext(13);\n    i0.ɵɵpipe(14, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\")(16, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function AssetsComponent_div_0_tr_21_Template_button_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const asset_r7 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return ctx_r8.toggleUpdateAsset(asset_r7.portfolioId, asset_r7.assetId, asset_r7.units, asset_r7.symbol);\n    });\n    i0.ɵɵtext(17, \"Modify\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const asset_r7 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(asset_r7.assetId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(asset_r7.portfolioId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(asset_r7.symbol);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(asset_r7.units);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(11, 6, asset_r7.livePrice));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(14, 8, asset_r7.liveTotal));\n  }\n}\n\nfunction AssetsComponent_div_0_mat_option_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const symbol_r10 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", symbol_r10);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", symbol_r10, \" \");\n  }\n}\n\nfunction AssetsComponent_div_0_form_36_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"form\", 23, 24);\n    i0.ɵɵlistener(\"ngSubmit\", function AssetsComponent_div_0_form_36_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r17);\n\n      const _r12 = i0.ɵɵreference(6);\n\n      const _r14 = i0.ɵɵreference(16);\n\n      const _r15 = i0.ɵɵreference(21);\n\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return ctx_r16.updateAsset(ctx_r16.portfolioId, +_r12.value, _r14.value, +_r15.value);\n    });\n    i0.ɵɵelementStart(2, \"div\", 19)(3, \"label\", 25);\n    i0.ɵɵtext(4, \"Asset Id\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"input\", 26, 27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\")(8, \"label\", 28);\n    i0.ɵɵtext(9, \"Portfolio Id\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(10, \"input\", 29, 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\")(13, \"label\", 31);\n    i0.ɵɵtext(14, \"Symbol\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(15, \"input\", 32, 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\")(18, \"label\", 33);\n    i0.ɵɵtext(19, \"Units\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(20, \"input\", 34, 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"button\", 35);\n    i0.ɵɵtext(23, \"Modify Asset\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"button\", 36);\n    i0.ɵɵlistener(\"click\", function AssetsComponent_div_0_form_36_Template_button_click_24_listener() {\n      i0.ɵɵrestoreView(_r17);\n\n      const _r12 = i0.ɵɵreference(6);\n\n      const ctx_r18 = i0.ɵɵnextContext(2);\n      return ctx_r18.deleteAsset(ctx_r18.portfolioId, +_r12.value);\n    });\n    i0.ɵɵtext(25, \"Delete Asset\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r6.updatedAsset.assetId);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r6.updatedAsset.portfolioId);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r6.updatedAsset.symbol);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r6.updatedAsset.units);\n  }\n}\n\nfunction AssetsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"div\", 4)(3, \"table\", 5)(4, \"thead\")(5, \"tr\")(6, \"th\", 6);\n    i0.ɵɵtext(7, \"Id\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\", 6);\n    i0.ɵɵtext(9, \"PortfolioId\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 7);\n    i0.ɵɵtext(11, \"Symbol\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\", 6);\n    i0.ɵɵtext(13, \"Units\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\", 6);\n    i0.ɵɵtext(15, \"Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"th\", 6);\n    i0.ɵɵtext(17, \"Total\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"th\", 6);\n    i0.ɵɵtext(19, \"Modify\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(20, \"tbody\");\n    i0.ɵɵtemplate(21, AssetsComponent_div_0_tr_21_Template, 18, 10, \"tr\", 8);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(22, \"div\", 9)(23, \"div\", 10)(24, \"form\", 11);\n    i0.ɵɵlistener(\"ngSubmit\", function AssetsComponent_div_0_Template_form_ngSubmit_24_listener() {\n      i0.ɵɵrestoreView(_r20);\n\n      const _r2 = i0.ɵɵreference(27);\n\n      const _r5 = i0.ɵɵreference(32);\n\n      const ctx_r19 = i0.ɵɵnextContext();\n      return ctx_r19.postAsset(ctx_r19.portfolioId, _r2.value, +_r5.value);\n    });\n    i0.ɵɵelementStart(25, \"mat-form-field\");\n    i0.ɵɵelement(26, \"input\", 12, 13);\n    i0.ɵɵelementStart(28, \"mat-autocomplete\", null, 14);\n    i0.ɵɵtemplate(30, AssetsComponent_div_0_mat_option_30_Template, 2, 2, \"mat-option\", 15);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(31, \"input\", 16, 17);\n    i0.ɵɵelementStart(33, \"button\", 18);\n    i0.ɵɵtext(34, \"Add Asset\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(35, \"div\", 19);\n    i0.ɵɵtemplate(36, AssetsComponent_div_0_form_36_Template, 26, 4, \"form\", 20);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const _r3 = i0.ɵɵreference(29);\n\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(21);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.assetList);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.formGroup);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"matAutocomplete\", _r3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.filteredSymbols);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.toggleShowUpdateAsset);\n  }\n}\n\nexport class AssetsComponent {\n  constructor(service, fb) {\n    this.service = service;\n    this.fb = fb;\n    this.portfolioId = this.service.portfolioId;\n    this.toggleShowUpdateAsset = false;\n    this.updatedAsset = {\n      portfolioId: -1,\n      assetId: -1,\n      units: -1,\n      symbol: '',\n      livePrice: -1,\n      liveTotal: -1\n    };\n  }\n\n  ngOnInit() {\n    this.initForm();\n    this.getSymbols();\n    this.getAllAssets(this.portfolioId); // this.getAssetsPrice();\n  }\n\n  ngAfterViewInit() {// this.getAssetListPrices()\n    // this.getAssetsPrice();\n    // setInterval(() => this.getAssetsPrice(), 5000)\n  }\n\n  ngOnChanges() {}\n\n  initForm() {\n    var _a;\n\n    this.formGroup = this.fb.group({\n      'symbol': ['']\n    });\n    (_a = this.formGroup.get('symbol')) === null || _a === void 0 ? void 0 : _a.valueChanges.subscribe(response => {\n      this.filterdata(response);\n    });\n  }\n\n  filterdata(enteredData) {\n    this.filteredSymbols = this.symbolList.filter(symbol => {\n      return symbol.toLocaleLowerCase().indexOf(enteredData.toLocaleLowerCase()) > -1;\n    });\n  }\n\n  getSymbols() {\n    this.service.getQuotes().subscribe(response => {\n      this.symbolList = response;\n      this.symbolList = this.symbolList.filter(array => array.includes('USDT'));\n      this.symbolList.forEach((element, index) => {\n        this.symbolList[index] = element.substring(0, element.length - 4);\n      });\n      this.filteredSymbols = this.symbolList;\n    });\n  }\n\n  getAllAssets(pid) {\n    this.service.getAllAssets(pid).subscribe(result => {\n      result.sort((a, b) => a.symbol.localeCompare(b.symbol));\n      this.assetList = result;\n      this.getAssetListPricesUrl();\n      this.getAssetsPrice();\n      console.log(this.assetList);\n    }, error => console.log(error));\n  }\n\n  postAsset(portfolioId, symbol, units) {\n    this.service.postAsset(portfolioId, symbol, units).subscribe(result => {\n      this.getAllAssets(this.portfolioId);\n    }, error => console.error(error));\n  }\n\n  toggleUpdateAsset(portfolioId, assetId, units, symbol) {\n    this.toggleShowUpdateAsset = true;\n    this.updatedAsset.portfolioId = portfolioId;\n    this.updatedAsset.assetId = assetId;\n    this.updatedAsset.units = units;\n    this.updatedAsset.symbol = symbol;\n  }\n\n  updateAsset(portfolioId, assetId, symbol, units) {\n    this.service.updateAsset(portfolioId, assetId, symbol, units).subscribe(result => {\n      this.getAllAssets(this.portfolioId);\n    }, error => console.log(error));\n    this.toggleShowUpdateAsset = false;\n  }\n\n  deleteAsset(portfolioId, assetId) {\n    this.service.deleteAsset(portfolioId, assetId).subscribe(result => {\n      this.getAllAssets(this.portfolioId);\n    }, error => console.log(error));\n    this.toggleShowUpdateAsset = false;\n  }\n\n  getAssetListPricesUrl() {\n    this.livePricesUrl = \"https://api.binance.com/api/v3/ticker/price?symbols=[\";\n    this.assetList.forEach(element => {\n      this.livePricesUrl = this.livePricesUrl + '\"' + element.symbol + \"USDT\" + '\"';\n\n      if (this.assetList[this.assetList.length - 1] == element) {\n        this.livePricesUrl = this.livePricesUrl + \"]\";\n      } else {\n        this.livePricesUrl = this.livePricesUrl + \",\";\n      }\n    });\n    console.log(this.livePricesUrl);\n  }\n\n  getAssetsPrice() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.service.getAssetsPrice(_this.livePricesUrl).subscribe(result => {\n        result.forEach((element, index) => {\n          result[index].symbol = element.symbol.substring(0, element.symbol.length - 4);\n        });\n        result.sort((a, b) => a.symbol.localeCompare(b.symbol));\n\n        for (let i = 0; i < _this.assetList.length; i++) {\n          _this.assetList[i].livePrice = result[i].price;\n          _this.assetList[i].liveTotal = _this.assetList[i].units * _this.assetList[i].livePrice;\n        }\n\n        _this.calculateTotal();\n\n        _this.delay(5000);\n\n        _this.getAssetsPrice(); // pune delay simplu de 5s aici\n        // apeleaza iar functia\n        // scoate while\n        // this.assetList.forEach(assetElement => {\n        //   result.forEach(resultElement => {\n        //     if (assetElement.symbol == resultElement.symbol) {\n        //       assetElement.livePrice = resultElement.price;\n        //       return;\n        //     }\n        //   });\n        // });\n\n      });\n    })();\n  } //foloseste then\n  //foloseste alta metoda de delay\n\n\n  calculateTotal() {\n    this.totalBalance = 0;\n    this.assetList.forEach(element => {\n      this.totalBalance = Number(this.totalBalance) + Number(element.liveTotal);\n    });\n  }\n\n  delay(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n}\n\nAssetsComponent.ɵfac = function AssetsComponent_Factory(t) {\n  return new (t || AssetsComponent)(i0.ɵɵdirectiveInject(i1.AppDataService), i0.ɵɵdirectiveInject(i2.FormBuilder));\n};\n\nAssetsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AssetsComponent,\n  selectors: [[\"app-assets\"]],\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 5,\n  vars: 4,\n  consts: [[\"class\", \"container\", 4, \"ngIf\"], [1, \"row\", \"mt-3\"], [1, \"container\"], [1, \"row\"], [1, \"col-9\"], [1, \"table\"], [1, \"col-1\"], [1, \"col-2\"], [4, \"ngFor\", \"ngForOf\"], [1, \"col-3\"], [1, \"mb-5\"], [3, \"formGroup\", \"ngSubmit\"], [\"formControlName\", \"symbol\", \"matInput\", \"\", \"type\", \"text\", \"placeholder\", \"Symbol\", 1, \"form-control\", 3, \"matAutocomplete\"], [\"symbol\", \"\"], [\"auto\", \"matAutocomplete\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"number\", \"min\", \"0\", \"placeholder\", \"Units\", 1, \"form-control\"], [\"units\", \"\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", \"mt-3\"], [1, \"mt-3\"], [3, \"ngSubmit\", 4, \"ngIf\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [3, \"value\"], [3, \"ngSubmit\"], [\"submitForm\", \"ngForm\"], [\"for\", \"assetId\", \"hidden\", \"\", 1, \"form-label\"], [\"type\", \"number\", \"id\", \"assetId\", \"name\", \"assetId\", \"disabled\", \"\", \"hidden\", \"\", 1, \"form-control\", 3, \"ngModel\"], [\"assetId\", \"\"], [\"for\", \"portfolioId\", \"hidden\", \"\", 1, \"form-label\"], [\"type\", \"number\", \"id\", \"portfolioId\", \"name\", \"portfolioId\", \"disabled\", \"\", \"hidden\", \"\", 1, \"form-control\", 3, \"ngModel\"], [\"localportfolioId\", \"\"], [\"for\", \"symbol\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"symbol\", \"name\", \"symbol\", \"disabled\", \"\", 1, \"form-control\", 3, \"ngModel\"], [\"for\", \"units\", 1, \"form-label\"], [\"type\", \"number\", \"id\", \"units\", \"name\", \"units\", 1, \"form-control\", 3, \"ngModel\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"mt-3\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", \"mt-3\", \"float-end\", 3, \"click\"]],\n  template: function AssetsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, AssetsComponent_div_0_Template, 37, 5, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1)(2, \"h1\");\n      i0.ɵɵtext(3);\n      i0.ɵɵpipe(4, \"currency\");\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.assetList);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\"Total: \", i0.ɵɵpipeBind1(4, 2, ctx.totalBalance), \" \");\n    }\n  },\n  directives: [i3.NgIf, i3.NgForOf, i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.FormGroupDirective, i4.MatFormField, i2.DefaultValueAccessor, i5.MatInput, i6.MatAutocompleteTrigger, i2.NgControlStatus, i2.FormControlName, i6.MatAutocomplete, i7.MatOption, i2.NgForm, i2.NumberValueAccessor, i2.NgModel],\n  pipes: [i3.CurrencyPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhc3NldHMuY29tcG9uZW50LmNzcyJ9 */\"]\n});","map":{"version":3,"sources":["C:/Users/anton/source/repos/PortfolioTracker/ClientApp/src/app/assets/assets.component.ts"],"names":["i0","i1","i2","i3","i4","i5","i6","i7","AssetsComponent_div_0_tr_21_Template","rf","ctx","_r9","ɵɵgetCurrentView","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵpipe","ɵɵlistener","AssetsComponent_div_0_tr_21_Template_button_click_16_listener","restoredCtx","ɵɵrestoreView","asset_r7","$implicit","ctx_r8","ɵɵnextContext","toggleUpdateAsset","portfolioId","assetId","units","symbol","ɵɵadvance","ɵɵtextInterpolate","ɵɵpipeBind1","livePrice","liveTotal","AssetsComponent_div_0_mat_option_30_Template","symbol_r10","ɵɵproperty","ɵɵtextInterpolate1","AssetsComponent_div_0_form_36_Template","_r17","AssetsComponent_div_0_form_36_Template_form_ngSubmit_0_listener","_r12","ɵɵreference","_r14","_r15","ctx_r16","updateAsset","value","ɵɵelement","AssetsComponent_div_0_form_36_Template_button_click_24_listener","ctx_r18","deleteAsset","ctx_r6","updatedAsset","AssetsComponent_div_0_Template","_r20","ɵɵtemplate","AssetsComponent_div_0_Template_form_ngSubmit_24_listener","_r2","_r5","ctx_r19","postAsset","_r3","ctx_r0","assetList","formGroup","filteredSymbols","toggleShowUpdateAsset","AssetsComponent","constructor","service","fb","ngOnInit","initForm","getSymbols","getAllAssets","ngAfterViewInit","ngOnChanges","_a","group","get","valueChanges","subscribe","response","filterdata","enteredData","symbolList","filter","toLocaleLowerCase","indexOf","getQuotes","array","includes","forEach","element","index","substring","length","pid","result","sort","a","b","localeCompare","getAssetListPricesUrl","getAssetsPrice","console","log","error","livePricesUrl","i","price","calculateTotal","delay","totalBalance","Number","ms","Promise","resolve","setTimeout","ɵfac","AssetsComponent_Factory","t","ɵɵdirectiveInject","AppDataService","FormBuilder","ɵcmp","ɵɵdefineComponent","type","selectors","features","ɵɵNgOnChangesFeature","decls","vars","consts","template","AssetsComponent_Template","directives","NgIf","NgForOf","ɵNgNoValidate","NgControlStatusGroup","FormGroupDirective","MatFormField","DefaultValueAccessor","MatInput","MatAutocompleteTrigger","NgControlStatus","FormControlName","MatAutocomplete","MatOption","NgForm","NumberValueAccessor","NgModel","pipes","CurrencyPipe","styles"],"mappings":"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","sourcesContent":["import * as i0 from \"@angular/core\";\r\nimport * as i1 from \"src/app/services/app-data.service\";\r\nimport * as i2 from \"@angular/forms\";\r\nimport * as i3 from \"@angular/common\";\r\nimport * as i4 from \"@angular/material/form-field\";\r\nimport * as i5 from \"@angular/material/input\";\r\nimport * as i6 from \"@angular/material/autocomplete\";\r\nimport * as i7 from \"@angular/material/core\";\r\nfunction AssetsComponent_div_0_tr_21_Template(rf, ctx) { if (rf & 1) {\r\n    const _r9 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\r\n    i0.ɵɵtext(2);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(3, \"td\");\r\n    i0.ɵɵtext(4);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(5, \"td\");\r\n    i0.ɵɵtext(6);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(7, \"td\");\r\n    i0.ɵɵtext(8);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(9, \"td\");\r\n    i0.ɵɵtext(10);\r\n    i0.ɵɵpipe(11, \"currency\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(12, \"td\");\r\n    i0.ɵɵtext(13);\r\n    i0.ɵɵpipe(14, \"currency\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(15, \"td\")(16, \"button\", 21);\r\n    i0.ɵɵlistener(\"click\", function AssetsComponent_div_0_tr_21_Template_button_click_16_listener() { const restoredCtx = i0.ɵɵrestoreView(_r9); const asset_r7 = restoredCtx.$implicit; const ctx_r8 = i0.ɵɵnextContext(2); return ctx_r8.toggleUpdateAsset(asset_r7.portfolioId, asset_r7.assetId, asset_r7.units, asset_r7.symbol); });\r\n    i0.ɵɵtext(17, \"Modify\");\r\n    i0.ɵɵelementEnd()()();\r\n} if (rf & 2) {\r\n    const asset_r7 = ctx.$implicit;\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(asset_r7.assetId);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(asset_r7.portfolioId);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(asset_r7.symbol);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(asset_r7.units);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(11, 6, asset_r7.livePrice));\r\n    i0.ɵɵadvance(3);\r\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(14, 8, asset_r7.liveTotal));\r\n} }\r\nfunction AssetsComponent_div_0_mat_option_30_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"mat-option\", 22);\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const symbol_r10 = ctx.$implicit;\r\n    i0.ɵɵproperty(\"value\", symbol_r10);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate1(\" \", symbol_r10, \" \");\r\n} }\r\nfunction AssetsComponent_div_0_form_36_Template(rf, ctx) { if (rf & 1) {\r\n    const _r17 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"form\", 23, 24);\r\n    i0.ɵɵlistener(\"ngSubmit\", function AssetsComponent_div_0_form_36_Template_form_ngSubmit_0_listener() { i0.ɵɵrestoreView(_r17); const _r12 = i0.ɵɵreference(6); const _r14 = i0.ɵɵreference(16); const _r15 = i0.ɵɵreference(21); const ctx_r16 = i0.ɵɵnextContext(2); return ctx_r16.updateAsset(ctx_r16.portfolioId, +_r12.value, _r14.value, +_r15.value); });\r\n    i0.ɵɵelementStart(2, \"div\", 19)(3, \"label\", 25);\r\n    i0.ɵɵtext(4, \"Asset Id\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelement(5, \"input\", 26, 27);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(7, \"div\")(8, \"label\", 28);\r\n    i0.ɵɵtext(9, \"Portfolio Id\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelement(10, \"input\", 29, 30);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(12, \"div\")(13, \"label\", 31);\r\n    i0.ɵɵtext(14, \"Symbol\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelement(15, \"input\", 32, 13);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(17, \"div\")(18, \"label\", 33);\r\n    i0.ɵɵtext(19, \"Units\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelement(20, \"input\", 34, 17);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(22, \"button\", 35);\r\n    i0.ɵɵtext(23, \"Modify Asset\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(24, \"button\", 36);\r\n    i0.ɵɵlistener(\"click\", function AssetsComponent_div_0_form_36_Template_button_click_24_listener() { i0.ɵɵrestoreView(_r17); const _r12 = i0.ɵɵreference(6); const ctx_r18 = i0.ɵɵnextContext(2); return ctx_r18.deleteAsset(ctx_r18.portfolioId, +_r12.value); });\r\n    i0.ɵɵtext(25, \"Delete Asset\");\r\n    i0.ɵɵelementEnd()();\r\n} if (rf & 2) {\r\n    const ctx_r6 = i0.ɵɵnextContext(2);\r\n    i0.ɵɵadvance(5);\r\n    i0.ɵɵproperty(\"ngModel\", ctx_r6.updatedAsset.assetId);\r\n    i0.ɵɵadvance(5);\r\n    i0.ɵɵproperty(\"ngModel\", ctx_r6.updatedAsset.portfolioId);\r\n    i0.ɵɵadvance(5);\r\n    i0.ɵɵproperty(\"ngModel\", ctx_r6.updatedAsset.symbol);\r\n    i0.ɵɵadvance(5);\r\n    i0.ɵɵproperty(\"ngModel\", ctx_r6.updatedAsset.units);\r\n} }\r\nfunction AssetsComponent_div_0_Template(rf, ctx) { if (rf & 1) {\r\n    const _r20 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"div\", 4)(3, \"table\", 5)(4, \"thead\")(5, \"tr\")(6, \"th\", 6);\r\n    i0.ɵɵtext(7, \"Id\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(8, \"th\", 6);\r\n    i0.ɵɵtext(9, \"PortfolioId\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(10, \"th\", 7);\r\n    i0.ɵɵtext(11, \"Symbol\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(12, \"th\", 6);\r\n    i0.ɵɵtext(13, \"Units\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(14, \"th\", 6);\r\n    i0.ɵɵtext(15, \"Price\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(16, \"th\", 6);\r\n    i0.ɵɵtext(17, \"Total\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(18, \"th\", 6);\r\n    i0.ɵɵtext(19, \"Modify\");\r\n    i0.ɵɵelementEnd()()();\r\n    i0.ɵɵelementStart(20, \"tbody\");\r\n    i0.ɵɵtemplate(21, AssetsComponent_div_0_tr_21_Template, 18, 10, \"tr\", 8);\r\n    i0.ɵɵelementEnd()()();\r\n    i0.ɵɵelementStart(22, \"div\", 9)(23, \"div\", 10)(24, \"form\", 11);\r\n    i0.ɵɵlistener(\"ngSubmit\", function AssetsComponent_div_0_Template_form_ngSubmit_24_listener() { i0.ɵɵrestoreView(_r20); const _r2 = i0.ɵɵreference(27); const _r5 = i0.ɵɵreference(32); const ctx_r19 = i0.ɵɵnextContext(); return ctx_r19.postAsset(ctx_r19.portfolioId, _r2.value, +_r5.value); });\r\n    i0.ɵɵelementStart(25, \"mat-form-field\");\r\n    i0.ɵɵelement(26, \"input\", 12, 13);\r\n    i0.ɵɵelementStart(28, \"mat-autocomplete\", null, 14);\r\n    i0.ɵɵtemplate(30, AssetsComponent_div_0_mat_option_30_Template, 2, 2, \"mat-option\", 15);\r\n    i0.ɵɵelementEnd()();\r\n    i0.ɵɵelement(31, \"input\", 16, 17);\r\n    i0.ɵɵelementStart(33, \"button\", 18);\r\n    i0.ɵɵtext(34, \"Add Asset\");\r\n    i0.ɵɵelementEnd()()();\r\n    i0.ɵɵelementStart(35, \"div\", 19);\r\n    i0.ɵɵtemplate(36, AssetsComponent_div_0_form_36_Template, 26, 4, \"form\", 20);\r\n    i0.ɵɵelementEnd()()()();\r\n} if (rf & 2) {\r\n    const _r3 = i0.ɵɵreference(29);\r\n    const ctx_r0 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(21);\r\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.assetList);\r\n    i0.ɵɵadvance(3);\r\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.formGroup);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵproperty(\"matAutocomplete\", _r3);\r\n    i0.ɵɵadvance(4);\r\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.filteredSymbols);\r\n    i0.ɵɵadvance(6);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.toggleShowUpdateAsset);\r\n} }\r\nexport class AssetsComponent {\r\n    constructor(service, fb) {\r\n        this.service = service;\r\n        this.fb = fb;\r\n        this.portfolioId = this.service.portfolioId;\r\n        this.toggleShowUpdateAsset = false;\r\n        this.updatedAsset = {\r\n            portfolioId: -1,\r\n            assetId: -1,\r\n            units: -1,\r\n            symbol: '',\r\n            livePrice: -1,\r\n            liveTotal: -1\r\n        };\r\n    }\r\n    ngOnInit() {\r\n        this.initForm();\r\n        this.getSymbols();\r\n        this.getAllAssets(this.portfolioId);\r\n        // this.getAssetsPrice();\r\n    }\r\n    ngAfterViewInit() {\r\n        // this.getAssetListPrices()\r\n        // this.getAssetsPrice();\r\n        // setInterval(() => this.getAssetsPrice(), 5000)\r\n    }\r\n    ngOnChanges() {\r\n    }\r\n    initForm() {\r\n        var _a;\r\n        this.formGroup = this.fb.group({\r\n            'symbol': ['']\r\n        });\r\n        (_a = this.formGroup.get('symbol')) === null || _a === void 0 ? void 0 : _a.valueChanges.subscribe(response => {\r\n            this.filterdata(response);\r\n        });\r\n    }\r\n    filterdata(enteredData) {\r\n        this.filteredSymbols = this.symbolList.filter(symbol => {\r\n            return symbol.toLocaleLowerCase().indexOf(enteredData.toLocaleLowerCase()) > -1;\r\n        });\r\n    }\r\n    getSymbols() {\r\n        this.service.getQuotes().subscribe(response => {\r\n            this.symbolList = response;\r\n            this.symbolList = this.symbolList.filter(array => array.includes('USDT'));\r\n            this.symbolList.forEach((element, index) => {\r\n                this.symbolList[index] = element.substring(0, element.length - 4);\r\n            });\r\n            this.filteredSymbols = this.symbolList;\r\n        });\r\n    }\r\n    getAllAssets(pid) {\r\n        this.service.getAllAssets(pid).subscribe(result => {\r\n            result.sort((a, b) => a.symbol.localeCompare(b.symbol));\r\n            this.assetList = result;\r\n            this.getAssetListPricesUrl();\r\n            this.getAssetsPrice();\r\n            console.log(this.assetList);\r\n        }, error => console.log(error));\r\n    }\r\n    postAsset(portfolioId, symbol, units) {\r\n        this.service.postAsset(portfolioId, symbol, units).subscribe(result => {\r\n            this.getAllAssets(this.portfolioId);\r\n        }, error => console.error(error));\r\n    }\r\n    toggleUpdateAsset(portfolioId, assetId, units, symbol) {\r\n        this.toggleShowUpdateAsset = true;\r\n        this.updatedAsset.portfolioId = portfolioId;\r\n        this.updatedAsset.assetId = assetId;\r\n        this.updatedAsset.units = units;\r\n        this.updatedAsset.symbol = symbol;\r\n    }\r\n    updateAsset(portfolioId, assetId, symbol, units) {\r\n        this.service.updateAsset(portfolioId, assetId, symbol, units).subscribe(result => {\r\n            this.getAllAssets(this.portfolioId);\r\n        }, error => console.log(error));\r\n        this.toggleShowUpdateAsset = false;\r\n    }\r\n    deleteAsset(portfolioId, assetId) {\r\n        this.service.deleteAsset(portfolioId, assetId).subscribe(result => {\r\n            this.getAllAssets(this.portfolioId);\r\n        }, error => console.log(error));\r\n        this.toggleShowUpdateAsset = false;\r\n    }\r\n    getAssetListPricesUrl() {\r\n        this.livePricesUrl = \"https://api.binance.com/api/v3/ticker/price?symbols=[\";\r\n        this.assetList.forEach(element => {\r\n            this.livePricesUrl = this.livePricesUrl + '\"' + element.symbol + \"USDT\" + '\"';\r\n            if (this.assetList[this.assetList.length - 1] == element) {\r\n                this.livePricesUrl = this.livePricesUrl + \"]\";\r\n            }\r\n            else {\r\n                this.livePricesUrl = this.livePricesUrl + \",\";\r\n            }\r\n        });\r\n        console.log(this.livePricesUrl);\r\n    }\r\n    async getAssetsPrice() {\r\n        this.service.getAssetsPrice(this.livePricesUrl).subscribe(result => {\r\n            result.forEach((element, index) => {\r\n                result[index].symbol = element.symbol.substring(0, element.symbol.length - 4);\r\n            });\r\n            result.sort((a, b) => a.symbol.localeCompare(b.symbol));\r\n            for (let i = 0; i < this.assetList.length; i++) {\r\n                this.assetList[i].livePrice = result[i].price;\r\n                this.assetList[i].liveTotal = this.assetList[i].units * this.assetList[i].livePrice;\r\n            }\r\n            this.calculateTotal();\r\n            this.delay(5000);\r\n            this.getAssetsPrice();\r\n            // pune delay simplu de 5s aici\r\n            // apeleaza iar functia\r\n            // scoate while\r\n            // this.assetList.forEach(assetElement => {\r\n            //   result.forEach(resultElement => {\r\n            //     if (assetElement.symbol == resultElement.symbol) {\r\n            //       assetElement.livePrice = resultElement.price;\r\n            //       return;\r\n            //     }\r\n            //   });\r\n            // });\r\n        });\r\n    }\r\n    //foloseste then\r\n    //foloseste alta metoda de delay\r\n    calculateTotal() {\r\n        this.totalBalance = 0;\r\n        this.assetList.forEach(element => {\r\n            this.totalBalance = Number(this.totalBalance) + Number(element.liveTotal);\r\n        });\r\n    }\r\n    delay(ms) {\r\n        return new Promise(resolve => setTimeout(resolve, ms));\r\n    }\r\n}\r\nAssetsComponent.ɵfac = function AssetsComponent_Factory(t) { return new (t || AssetsComponent)(i0.ɵɵdirectiveInject(i1.AppDataService), i0.ɵɵdirectiveInject(i2.FormBuilder)); };\r\nAssetsComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: AssetsComponent, selectors: [[\"app-assets\"]], features: [i0.ɵɵNgOnChangesFeature], decls: 5, vars: 4, consts: [[\"class\", \"container\", 4, \"ngIf\"], [1, \"row\", \"mt-3\"], [1, \"container\"], [1, \"row\"], [1, \"col-9\"], [1, \"table\"], [1, \"col-1\"], [1, \"col-2\"], [4, \"ngFor\", \"ngForOf\"], [1, \"col-3\"], [1, \"mb-5\"], [3, \"formGroup\", \"ngSubmit\"], [\"formControlName\", \"symbol\", \"matInput\", \"\", \"type\", \"text\", \"placeholder\", \"Symbol\", 1, \"form-control\", 3, \"matAutocomplete\"], [\"symbol\", \"\"], [\"auto\", \"matAutocomplete\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"number\", \"min\", \"0\", \"placeholder\", \"Units\", 1, \"form-control\"], [\"units\", \"\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", \"mt-3\"], [1, \"mt-3\"], [3, \"ngSubmit\", 4, \"ngIf\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [3, \"value\"], [3, \"ngSubmit\"], [\"submitForm\", \"ngForm\"], [\"for\", \"assetId\", \"hidden\", \"\", 1, \"form-label\"], [\"type\", \"number\", \"id\", \"assetId\", \"name\", \"assetId\", \"disabled\", \"\", \"hidden\", \"\", 1, \"form-control\", 3, \"ngModel\"], [\"assetId\", \"\"], [\"for\", \"portfolioId\", \"hidden\", \"\", 1, \"form-label\"], [\"type\", \"number\", \"id\", \"portfolioId\", \"name\", \"portfolioId\", \"disabled\", \"\", \"hidden\", \"\", 1, \"form-control\", 3, \"ngModel\"], [\"localportfolioId\", \"\"], [\"for\", \"symbol\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"symbol\", \"name\", \"symbol\", \"disabled\", \"\", 1, \"form-control\", 3, \"ngModel\"], [\"for\", \"units\", 1, \"form-label\"], [\"type\", \"number\", \"id\", \"units\", \"name\", \"units\", 1, \"form-control\", 3, \"ngModel\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"mt-3\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", \"mt-3\", \"float-end\", 3, \"click\"]], template: function AssetsComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵtemplate(0, AssetsComponent_div_0_Template, 37, 5, \"div\", 0);\r\n        i0.ɵɵelementStart(1, \"div\", 1)(2, \"h1\");\r\n        i0.ɵɵtext(3);\r\n        i0.ɵɵpipe(4, \"currency\");\r\n        i0.ɵɵelementEnd()();\r\n    } if (rf & 2) {\r\n        i0.ɵɵproperty(\"ngIf\", ctx.assetList);\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵtextInterpolate1(\"Total: \", i0.ɵɵpipeBind1(4, 2, ctx.totalBalance), \" \");\r\n    } }, directives: [i3.NgIf, i3.NgForOf, i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.FormGroupDirective, i4.MatFormField, i2.DefaultValueAccessor, i5.MatInput, i6.MatAutocompleteTrigger, i2.NgControlStatus, i2.FormControlName, i6.MatAutocomplete, i7.MatOption, i2.NgForm, i2.NumberValueAccessor, i2.NgModel], pipes: [i3.CurrencyPipe], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhc3NldHMuY29tcG9uZW50LmNzcyJ9 */\"] });\r\n"]},"metadata":{},"sourceType":"module"}